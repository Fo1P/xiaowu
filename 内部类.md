定义：可以将一个类得定义放在另一个类得定义内部，这就是内部类

# 创建内部类

```java
public class Parcell {
    class Contents{
        private int i=11;
        public int value(){
            return i;
        }
    }
    class Destination{
        private String label;
        Destination(String whereTo){
            label=whereTo;
        }
    String readLabel(){
            return label;
    }
    }
    public void ship(String dest){
        Contents c=new Contents();
        Destination d=new Destination(dest);
        System.out.println(d.readLabel());
    }
    public static void main(String[] args){
        Parcell p=new Parcell();
        p.ship("R");
    }
}
```

# 链接到外部类

**当生成一个内部类得对象时，此对象与制造它的外围对象（enclosing object）之间就有了一种联系，所有它能访问其外围对象所有成员，且不需要任何外在条件**

```java
interface Selector{
    boolean end();
    Object current();
    void next();
}
public class Sequence {
    private Object[] items;
    private int next=0;
    public Sequence(int size){items=new Object[size];}
    public void add(Object x){
        if (next<items.length){
            items[next++]=x;
        }
    }
    private class SequenceSelector implements Selector{
        private int i=0;
        public boolean end(){return i==items.length;}
        public Object current(){return items[i];}
        public void next(){if (i<items.length) i++;}
    }
    public Selector selector(){
        return new SequenceSelector();
    }
    public static void main(String[] args) {
        Sequence sequence=new Sequence(10);
        for (int i=0;i<10;i++){
            sequence.add(Integer.toString(i));
        }
        Selector selector=sequence.selector();
        while (!selector.end()){
            System.out.print(selector.current()+" ");
            selector.next();
        }
    }
}
```

# .this和.new

.this:如果需要生产对外部类对象的引用，可以使用外部类的名字后面紧跟圆点和this。

```java
public class DotThis {
    void f(){
        System.out.println("DotThis.f()");
    }
    public class Inner{
        public DotThis outer(){
            return DotThis.this;
        }
    }
    public Inner inner(){
        return new Inner();
    }
    public static void main(String[] args) {
        DotThis dt=new DotThis();//创建DotThis对象
        DotThis.Inner dnt=dt.inner();//通过DotThis调用内部类Inner 创建Inner类对象
        dnt.outer().f();
    }
}
```

